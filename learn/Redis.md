# `Redis`

<br>

### 一、什么是`Redis`

- `Redis`是一个使用`C语言`编写的，高性能非关系型`NoSQL`的键值对数据库

<br>

### 一、`Redis`缓存穿透、击穿、雪崩以及解决方案

- **缓存穿透**
  - 用户不断地请求一个缓存没有并且数据库也没有的数据，服务器疯狂的跟数据库建立连接从而压倒数据库。
- **缓存击穿**
  - 缓存里面的一个`key`非常的火爆，在某一时间这个`key`刚好过期，大并发数据量击穿了缓存直接请求数据库，导致数据库压力过大，严重情况会导致数据库崩溃，这就是缓存击穿。
- **缓存雪崩**
  - 在某一时刻，大量的`key`失效，用户大量请求直接请求数据库，导致数据库宕机。此时的`Redis`形同虚设，用户大量请求都命中不了，导致数据库服务器压力过大。

<br>

### 二、`Redis`数据类型

- **`Redis`主要有`5种`数据类型**
- **`String`**
  - **`可以存储的值`**
    - 字符串、整数或者浮点数
  - **`操作`**
    - 对整个字符串或者字符串的其中一部分执行操作，对整数和浮点数执行自增或者自减操作
  - **`使用场景`** **`计数器`**
    - 可以对`String`进行自增自减运算，从而实现计数器功能。
    - `Redis`这种内存型数据库的读写性能非常高，很适合存储频繁读写的计数量。
- **`List`**
  - **`可以存储的值`**
    - 列表
  - **`操作`**
    - 从两端压入或者弹出元素，对单个或者多个元素进行修剪，只保留一个范围内的元素
  - **`使用场景`** **`消息队列(发布/订阅功能)`**
    - List 是一个双向链表，可以通过`lpush`和`rpop`写入和读取消息
    - 不过最好使用`Kafka`、`RabbitMQ`等消息中间件。
- **`Set`**
  - **`可以存储的值`**
    - 无序集合
  - **`操作`**
    - 添加、获取、移除单个元素，检查一个元素是否存在于集合中，计算交集、并集、差集，从集合里面随机获取元素
  - **`使用场景`** **`共同好友功能`**
    - `Set`可以实现交集、并集等操作，从而实现共同好友等功能。
- **`Zset`**
  - **`可以存储的值`** **`排行榜功能`**
    - 有序集合
  - **`操作`**
    - 添加、获取、删除元素，根据分值范围或者成员来获取元素，计算一个键的排名
  - **`使用场景`**
    - 可以实现有序性操作，从而实现排行榜等功能。
- **`Hash`**
  - **`可以存储的值`**
    - 包含键值对的无序散列表
  - **`操作`**
    - 添加、获取、移除单个键值对，获取所有键值对，检查某个键是否存在
  - **`使用场景`** **`对象多重属性存储（如人的姓名，性别，年龄）`**
    - 主要是对一个对象的多重属性（如人的姓名，性别，年龄）的存储；
    - 同样是存储字符串，`Hash`与`String`的主要区别？
      1. 把所有相关的值聚集到一个`key`中，节省内存空间
      2. 只使用一个`key`，减少`key`冲突
      3. 当需要批量获取值的时候，只需要使用一个命令，减少内存`IO/CPU`的消耗
